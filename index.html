<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin To Earn | Earn Rewards</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Orbitron:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6C63FF;
            --primary-dark: #554fd8;
            --secondary: #FF6584;
            --dark: #121826;
            --dark-light: #1e2334;
            --darker: #0a0d16;
            --light: #f5f7ff;
            --gray: #8a8fa3;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Auth Styles */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
        }

        .auth-box {
            background-color: var(--dark-light);
            border-radius: 20px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 450px;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .auth-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .auth-header p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray);
            font-weight: 500;
        }

        .auth-tab.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--light);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 15px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: var(--light);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(108, 99, 255, 0.2);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .checkbox-group input {
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }

        .checkbox-group label {
            margin-bottom: 0;
            font-size: 0.9rem;
        }

        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(108, 99, 255, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(90deg, var(--dark-light), #2a2f45);
        }

        .btn-success {
            background: linear-gradient(90deg, var(--success), #27ae60);
        }

        .btn-warning {
            background: linear-gradient(90deg, var(--warning), #e67e22);
        }

        .btn-danger {
            background: linear-gradient(90deg, var(--danger), #c0392b);
        }

        /* App Styles (After Login) */
        .app-container {
            display: none;
        }

        /* Header & Navigation */
        .app-header {
            background-color: var(--dark-light);
            box-shadow: var(--shadow);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .logo-icon {
            font-size: 2rem;
            margin-right: 10px;
            color: var(--primary);
        }

        .nav-menu {
            display: flex;
            list-style: none;
        }

        .nav-menu li {
            margin-left: 30px;
        }

        .nav-menu a {
            color: var(--light);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
        }

        .nav-menu a i {
            margin-right: 8px;
            font-size: 1.2rem;
        }

        .nav-menu a:hover, .nav-menu a.active {
            color: var(--primary);
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .user-info span {
            margin-right: 15px;
            font-weight: 500;
        }

        .coin-balance {
            background: linear-gradient(90deg, var(--primary), var(--primary-dark));
            padding: 8px 15px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }

        .coin-balance i {
            margin-right: 5px;
        }

        .mobile-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Main Content */
        .main-content {
            padding: 40px 0;
            min-height: calc(100vh - 180px);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .page-header {
            margin-bottom: 30px;
        }

        .page-header h2 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .page-header p {
            color: var(--gray);
            font-size: 1rem;
        }

        /* Dashboard */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background-color: var(--dark-light);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .stat-card h3 {
            font-size: 1.1rem;
            color: var(--gray);
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2.2rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
        }

        .dashboard-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .dashboard-actions .btn {
            width: auto;
            min-width: 200px;
            padding: 18px 40px;
            font-size: 1.1rem;
        }

        /* Spin Wheel */
        .spin-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            background-color: var(--dark-light);
            border-radius: 20px;
            box-shadow: var(--shadow);
            max-width: 900px;
            margin: 0 auto;
        }

        .wheel-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin-bottom: 40px;
        }

        @media (max-width: 768px) {
            .wheel-container {
                width: 300px;
                height: 300px;
            }
        }

        .wheel {
            width: 100%;
            height: 100%;
            position: relative;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: 0 0 0 10px var(--dark-light), 0 0 30px rgba(0, 0, 0, 0.5);
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.22, 0.99);
        }

        .wheel-item {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right;
            left: 0;
            top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 60px;
            z-index: 10;
        }

        .wheel-pointer::before {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 30px solid var(--secondary);
        }

        .wheel-pointer::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 30px;
            background-color: var(--secondary);
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 0 0 5px 5px;
        }

        .spin-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 500px;
        }

        .spin-info {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .spin-info-item {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 150px;
        }

        .spin-info-item h3 {
            font-size: 1rem;
            color: var(--gray);
            margin-bottom: 5px;
        }

        .spin-info-item .value {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
        }

        .spin-btn {
            font-size: 1.3rem;
            padding: 20px 60px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 300px;
        }

        .spin-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .unlock-spin-btn {
            margin-top: 10px;
            width: 100%;
            max-width: 300px;
        }

        .reward-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background-color: var(--dark-light);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            z-index: 2000;
            text-align: center;
            max-width: 400px;
            width: 90%;
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .reward-popup.active {
            transform: translate(-50%, -50%) scale(1);
        }

        .reward-popup i {
            font-size: 4rem;
            color: var(--success);
            margin-bottom: 20px;
        }

        .reward-popup h3 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .reward-popup p {
            font-size: 1.2rem;
            color: var(--gray);
            margin-bottom: 25px;
        }

        .reward-amount {
            font-size: 3rem;
            font-weight: 800;
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(90deg, var(--success), #f1c40f);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 20px 0;
        }

        /* Ad Unlock System */
        .ad-unlock-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 3000;
            display: none;
        }

        .ad-unlock-modal.active {
            display: flex;
        }

        .ad-unlock-content {
            background-color: var(--dark-light);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .ad-unlock-content h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .ad-unlock-content p {
            margin-bottom: 25px;
            color: var(--gray);
        }

        .ad-timer {
            font-size: 3rem;
            font-weight: 800;
            font-family: 'Orbitron', sans-serif;
            color: var(--secondary);
            margin: 20px 0;
        }

        .ad-placeholder {
            background-color: rgba(0, 0, 0, 0.3);
            border: 2px dashed var(--primary);
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .ad-placeholder h4 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .ad-placeholder p {
            font-size: 0.9rem;
            color: var(--gray);
        }

        /* Withdraw System */
        .withdraw-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .withdraw-card {
            background-color: var(--dark-light);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .withdraw-card h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .payment-methods {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        .payment-method {
            flex: 1;
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .payment-method.active {
            border-color: var(--primary);
            background-color: rgba(108, 99, 255, 0.1);
        }

        .payment-method i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .withdraw-form {
            margin-top: 20px;
        }

        .withdraw-info {
            background-color: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .withdraw-info p {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .withdraw-info span {
            font-weight: 600;
            color: var(--primary);
        }

        .withdraw-history {
            margin-top: 40px;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .history-table th, .history-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-table th {
            background-color: rgba(0, 0, 0, 0.2);
            font-weight: 600;
            color: var(--primary);
        }

        .status-pending {
            color: var(--warning);
            font-weight: 600;
        }

        .status-completed {
            color: var(--success);
            font-weight: 600;
        }

        /* Profile Page */
        .profile-container {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        @media (max-width: 992px) {
            .profile-container {
                grid-template-columns: 1fr;
            }
        }

        .profile-card {
            background-color: var(--dark-light);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            font-size: 2.5rem;
        }

        .profile-info h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .profile-info p {
            color: var(--gray);
        }

        .profile-stats {
            margin-top: 30px;
        }

        .profile-stat {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-stat:last-child {
            border-bottom: none;
        }

        /* Static Pages */
        .static-page {
            background-color: var(--dark-light);
            border-radius: 20px;
            padding: 40px;
            box-shadow: var(--shadow);
            max-width: 800px;
            margin: 0 auto;
        }

        .static-page h3 {
            font-size: 1.8rem;
            margin: 25px 0 15px;
            color: var(--primary);
        }

        .static-page h3:first-child {
            margin-top: 0;
        }

        .static-page p, .static-page ul {
            margin-bottom: 15px;
        }

        .static-page ul {
            padding-left: 20px;
        }

        /* Footer */
        .app-footer {
            background-color: var(--darker);
            padding: 30px 0;
            margin-top: 60px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .footer-links {
            display: flex;
            list-style: none;
        }

        .footer-links li {
            margin-left: 25px;
        }

        .footer-links a {
            color: var(--gray);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .copyright {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 20px;
            width: 100%;
            text-align: center;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .nav-menu {
                position: fixed;
                top: 80px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 80px);
                background-color: var(--dark-light);
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                padding-top: 40px;
                transition: var(--transition);
                z-index: 999;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-menu li {
                margin: 15px 0;
            }

            .mobile-toggle {
                display: block;
            }

            .user-info span {
                display: none;
            }

            .footer-content {
                flex-direction: column;
            }

            .footer-links {
                margin-top: 20px;
            }

            .footer-links li {
                margin: 0 10px;
            }
        }

        @media (max-width: 576px) {
            .auth-box {
                padding: 30px 20px;
            }

            .stats-cards {
                grid-template-columns: 1fr;
            }

            .dashboard-actions .btn {
                min-width: 100%;
            }

            .payment-methods {
                flex-direction: column;
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .text-success {
            color: var(--success);
        }

        .text-warning {
            color: var(--warning);
        }

        .text-danger {
            color: var(--danger);
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .mb-30 {
            margin-bottom: 30px;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mt-30 {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <!-- Authentication Container -->
    <div class="auth-container" id="authContainer">
        <div class="auth-box">
            <div class="auth-header">
                <h1><i class="fas fa-coins"></i> Spin To Earn</h1>
                <p>Spin the wheel, watch ads, and withdraw real money!</p>
            </div>
            
            <div class="auth-tabs">
                <div class="auth-tab active" id="loginTab">Login</div>
                <div class="auth-tab" id="signupTab">Sign Up</div>
            </div>
            
            <form class="auth-form active" id="loginForm">
                <div class="form-group">
                    <label for="loginUsername">Username or Email</label>
                    <input type="text" id="loginUsername" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" class="form-control" required>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn">Login</button>
                </div>
            </form>
            
            <form class="auth-form" id="signupForm">
                <div class="form-group">
                    <label for="signupUsername">Username</label>
                    <input type="text" id="signupUsername" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" class="form-control" required>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="ageConfirm" required>
                    <label for="ageConfirm">I confirm that I am 18 years or older</label>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-secondary">Sign Up</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- App Container (After Login) -->
    <div class="app-container" id="appContainer">
        <!-- Header -->
        <header class="app-header">
            <div class="container header-content">
                <div class="logo">
                    <div class="logo-icon"><i class="fas fa-coins"></i></div>
                    <h1>Spin To Earn</h1>
                </div>
                
                <div class="mobile-toggle" id="mobileToggle">
                    <i class="fas fa-bars"></i>
                </div>
                
                <ul class="nav-menu" id="navMenu">
                    <li><a href="#" class="nav-link active" data-page="home"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#" class="nav-link" data-page="spin"><i class="fas fa-sync-alt"></i> Spin</a></li>
                    <li><a href="#" class="nav-link" data-page="withdraw"><i class="fas fa-wallet"></i> Withdraw</a></li>
                    <li><a href="#" class="nav-link" data-page="profile"><i class="fas fa-user"></i> Profile</a></li>
                    <li><a href="#" class="nav-link" data-page="static-about"><i class="fas fa-info-circle"></i> About</a></li>
                    <li><a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
                
                <div class="user-info">
                    <span id="usernameDisplay"></span>
                    <div class="coin-balance">
                        <i class="fas fa-coins"></i> <span id="coinBalance">0</span>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Home Page -->
                <div class="page active" id="homePage">
                    <div class="page-header">
                        <h2>Dashboard</h2>
                        <p>Welcome back! Check your stats and start earning.</p>
                    </div>
                    
                    <div class="stats-cards">
                        <div class="stat-card">
                            <i class="fas fa-coins"></i>
                            <h3>Current Balance</h3>
                            <div class="value" id="dashboardCoins">0</div>
                            <p id="dashboardPkr">0 PKR</p>
                        </div>
                        
                        <div class="stat-card">
                            <i class="fas fa-sync-alt"></i>
                            <h3>Spins Remaining</h3>
                            <div class="value" id="dashboardSpins">3</div>
                            <p>Resets daily at midnight</p>
                        </div>
                        
                        <div class="stat-card">
                            <i class="fas fa-chart-line"></i>
                            <h3>Total Earned</h3>
                            <div class="value" id="dashboardTotalCoins">0</div>
                            <p id="dashboardTotalPkr">0 PKR</p>
                        </div>
                        
                        <div class="stat-card">
                            <i class="fas fa-history"></i>
                            <h3>Total Spins</h3>
                            <div class="value" id="dashboardTotalSpins">0</div>
                            <p>Lifetime spins</p>
                        </div>
                    </div>
                    
                    <div class="dashboard-actions">
                        <button class="btn" id="goToSpinBtn">
                            <i class="fas fa-sync-alt"></i> Spin Now
                        </button>
                        <button class="btn btn-success" id="goToWithdrawBtn">
                            <i class="fas fa-wallet"></i> Withdraw Earnings
                        </button>
                    </div>
                </div>
                
                <!-- Spin Page -->
                <div class="page" id="spinPage">
                    <div class="page-header">
                        <h2>Spin To Earn</h2>
                        <p>Spin the wheel and win coins! Watch ads to unlock extra spins.</p>
                    </div>
                    
                    <div class="spin-container">
                        <div class="wheel-container">
                            <div class="wheel" id="wheel"></div>
                            <div class="wheel-pointer"></div>
                        </div>
                        
                        <div class="spin-controls">
                            <div class="spin-info">
                                <div class="spin-info-item">
                                    <h3>Spins Left</h3>
                                    <div class="value" id="spinsLeft">3</div>
                                </div>
                                
                                <div class="spin-info-item">
                                    <h3>Current Balance</h3>
                                    <div class="value" id="spinBalance">0</div>
                                </div>
                                
                                <div class="spin-info-item">
                                    <h3>Today's Wins</h3>
                                    <div class="value" id="todayWins">0</div>
                                </div>
                            </div>
                            
                            <button class="btn spin-btn" id="spinBtn">
                                <i class="fas fa-sync-alt"></i> SPIN NOW
                            </button>
                            
                            <button class="btn btn-warning unlock-spin-btn" id="unlockSpinBtn">
                                <i class="fas fa-unlock"></i> Watch Ad to Unlock Spin
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Withdraw Page -->
                <div class="page" id="withdrawPage">
                    <div class="page-header">
                        <h2>Withdraw Earnings</h2>
                        <p>Convert your coins to cash and withdraw to your account.</p>
                    </div>
                    
                    <div class="withdraw-container">
                        <div class="withdraw-card">
                            <h3>Withdraw Funds</h3>
                            
                            <div class="withdraw-info">
                                <p>Available Balance: <span id="withdrawBalance">0 coins</span></p>
                                <p>Equivalent: <span id="withdrawPkr">0 PKR</span></p>
                                <p>Minimum Withdrawal: <span>1000 PKR (1000 coins)</span></p>
                            </div>
                            
                            <div class="payment-methods">
                                <div class="payment-method active" data-method="jazzcash">
                                    <i class="fas fa-mobile-alt"></i>
                                    <h4>JazzCash</h4>
                                </div>
                                
                                <div class="payment-method" data-method="easypaisa">
                                    <i class="fas fa-wallet"></i>
                                    <h4>Easypaisa</h4>
                                </div>
                            </div>
                            
                            <form id="withdrawForm">
                                <div class="form-group">
                                    <label for="accountNumber">Account Number</label>
                                    <input type="text" id="accountNumber" class="form-control" placeholder="Enter your 11-digit mobile number" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="withdrawAmount">Amount (in PKR)</label>
                                    <input type="number" id="withdrawAmount" class="form-control" min="1000" step="100" placeholder="Minimum 1000 PKR" required>
                                    <small class="text-warning">100 coins = 10 PKR</small>
                                </div>
                                
                                <div class="form-group">
                                    <button type="submit" class="btn btn-success">Request Withdrawal</button>
                                </div>
                            </form>
                        </div>
                        
                        <div class="withdraw-history">
                            <h3>Withdrawal History</h3>
                            <table class="history-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Amount</th>
                                        <th>Method</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="withdrawHistory">
                                    <!-- Will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Profile Page -->
                <div class="page" id="profilePage">
                    <div class="page-header">
                        <h2>My Profile</h2>
                        <p>Manage your account and track your earnings.</p>
                    </div>
                    
                    <div class="profile-container">
                        <div class="profile-card">
                            <div class="profile-header">
                                <div class="profile-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="profile-info">
                                    <h3 id="profileUsername">Username</h3>
                                    <p id="profileEmail">email@example.com</p>
                                </div>
                            </div>
                            
                            <div class="profile-stats">
                                <div class="profile-stat">
                                    <span>Member Since</span>
                                    <span id="memberSince">Today</span>
                                </div>
                                <div class="profile-stat">
                                    <span>Total Spins</span>
                                    <span id="profileTotalSpins">0</span>
                                </div>
                                <div class="profile-stat">
                                    <span>Total Coins Earned</span>
                                    <span id="profileTotalCoins">0</span>
                                </div>
                                <div class="profile-stat">
                                    <span>Total Withdrawn</span>
                                    <span id="profileTotalWithdrawn">0 PKR</span>
                                </div>
                            </div>
                            
                            <button class="btn btn-danger mt-30" id="profileLogoutBtn">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                        
                        <div class="profile-card">
                            <h3>Recent Activity</h3>
                            <table class="history-table">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Activity</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody id="profileActivity">
                                    <!-- Will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Static Pages -->
                <div class="page" id="staticAbout">
                    <div class="page-header">
                        <h2>About Us</h2>
                        <p>Learn more about Spin To Earn platform</p>
                    </div>
                    
                    <div class="static-page">
                        <h3>Welcome to Spin To Earn</h3>
                        <p>Spin To Earn is a revolutionary platform that allows users to earn real money by simply spinning a wheel and watching ads. Our mission is to create a fun and engaging way for users to earn extra income while providing advertisers with valuable engagement.</p>
                        
                        <h3>How It Works</h3>
                        <ul>
                            <li>Sign up for a free account</li>
                            <li>Spin the wheel daily to earn coins</li>
                            <li>Watch ads to unlock extra spins</li>
                            <li>Accumulate coins and convert them to cash</li>
                            <li>Withdraw your earnings via JazzCash or Easypaisa</li>
                        </ul>
                        
                        <h3>Our Vision</h3>
                        <p>We aim to become the leading rewards platform in the region, providing a legitimate and transparent way for users to earn supplementary income. We believe in fair rewards and sustainable monetization for all parties involved.</p>
                        
                        <button class="btn mt-30" id="backFromAbout">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>
                
                <div class="page" id="staticPrivacy">
                    <div class="page-header">
                        <h2>Privacy Policy</h2>
                        <p>How we protect and use your data</p>
                    </div>
                    
                    <div class="static-page">
                        <h3>Data Collection</h3>
                        <p>We collect only the information necessary to provide our services: username, email, and age confirmation. We do not share your personal information with third parties except as required for payment processing.</p>
                        
                        <h3>Data Security</h3>
                        <p>Your data is stored locally in your browser using secure methods. We implement appropriate security measures to protect against unauthorized access or disclosure of your personal information.</p>
                        
                        <h3>Cookies and Tracking</h3>
                        <p>We do not use cookies for tracking purposes. All session data is stored locally and is not shared with external servers.</p>
                        
                        <button class="btn mt-30" id="backFromPrivacy">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>
                
                <div class="page" id="staticTerms">
                    <div class="page-header">
                        <h2>Terms & Conditions</h2>
                        <p>Rules and guidelines for using our platform</p>
                    </div>
                    
                    <div class="static-page">
                        <h3>Eligibility</h3>
                        <p>You must be at least 18 years old to use this platform. By creating an account, you confirm that you meet this age requirement.</p>
                        
                        <h3>Account Responsibility</h3>
                        <p>You are responsible for maintaining the confidentiality of your account credentials. Any activity under your account is your responsibility.</p>
                        
                        <h3>Earnings and Withdrawals</h3>
                        <p>All earnings are subject to verification. We reserve the right to suspend accounts suspected of fraudulent activity. Minimum withdrawal amount is 1000 PKR.</p>
                        
                        <h3>Platform Usage</h3>
                        <p>You agree not to use automated systems, bots, or any unfair methods to earn coins. Violation may result in account termination.</p>
                        
                        <button class="btn mt-30" id="backFromTerms">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>
                
                <div class="page" id="staticDisclaimer">
                    <div class="page-header">
                        <h2>Disclaimer</h2>
                        <p>Important legal information</p>
                    </div>
                    
                    <div class="static-page">
                        <h3>Earnings Disclaimer</h3>
                        <p>Spin To Earn is a rewards platform, not a guaranteed income source. Earnings vary based on user activity and are subject to the platform's terms. We do not promise specific income levels.</p>
                        
                        <h3>Ad Content</h3>
                        <p>We are not responsible for the content of third-party ads displayed on our platform. Users interact with ads at their own discretion.</p>
                        
                        <h3>Platform Availability</h3>
                        <p>We strive to maintain 24/7 platform availability but do not guarantee uninterrupted service. We reserve the right to modify or discontinue the platform at any time.</p>
                        
                        <button class="btn mt-30" id="backFromDisclaimer">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>
                
                <div class="page" id="staticContact">
                    <div class="page-header">
                        <h2>Contact Us</h2>
                        <p>Get in touch with our support team</p>
                    </div>
                    
                    <div class="static-page">
                        <h3>Support</h3>
                        <p>For any questions, issues, or feedback, please reach out to our support team.</p>
                        
                        <h3>Email</h3>
                        <p>support@spintoearn.com</p>
                        
                        <h3>Response Time</h3>
                        <p>We aim to respond to all inquiries within 24-48 hours during business days.</p>
                        
                        <h3>Business Hours</h3>
                        <p>Monday to Friday: 9 AM to 6 PM (PST)</p>
                        
                        <button class="btn mt-30" id="backFromContact">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="app-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="logo">
                        <div class="logo-icon"><i class="fas fa-coins"></i></div>
                        <h1>Spin To Earn</h1>
                    </div>
                    
                    <ul class="footer-links">
                        <li><a href="#" class="static-link" data-page="static-about">About</a></li>
                        <li><a href="#" class="static-link" data-page="static-privacy">Privacy</a></li>
                        <li><a href="#" class="static-link" data-page="static-terms">Terms</a></li>
                        <li><a href="#" class="static-link" data-page="static-disclaimer">Disclaimer</a></li>
                        <li><a href="#" class="static-link" data-page="static-contact">Contact</a></li>
                    </ul>
                    
                    <div class="copyright">
                        &copy; 2023 Spin To Earn. All rights reserved.
                    </div>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Reward Popup -->
    <div class="reward-popup" id="rewardPopup">
        <i class="fas fa-trophy"></i>
        <h3>Congratulations!</h3>
        <p>You won:</p>
        <div class="reward-amount" id="rewardAmount">0 coins</div>
        <p>Your coins have been added to your balance.</p>
        <button class="btn" id="closeRewardBtn">Continue</button>
    </div>
    
    <!-- Ad Unlock Modal -->
    <div class="ad-unlock-modal" id="adUnlockModal">
        <div class="ad-unlock-content">
            <h3><i class="fas fa-unlock-alt"></i> Unlock Extra Spin</h3>
            <p>Watch an ad to unlock an extra spin. The ad will open in a new tab.</p>
            
            <!-- MONETAG AD PLACEHOLDER -->
            <div class="ad-placeholder">
                <h4><i class="fas fa-ad"></i> Ad Integration Area</h4>
                <p>Website owner: Paste your Monetag direct link or script here.</p>
                <p><strong>Example Monetag Link:</strong> https://www.monetag.com/your-ad-link</p>
                <p><strong>OR Monetag Script:</strong> &lt;script src="https://www.monetag.com/your-script.js"&gt;&lt;/script&gt;</p>
                <!-- PASTE YOUR MONETAG DIRECT LINK OR SCRIPT HERE -->
            </div>
            
            <p>After watching the ad, return to this tab to claim your extra spin.</p>
            
            <div class="ad-timer" id="adTimer">30</div>
            <p>Waiting for ad completion...</p>
            
            <button class="btn btn-success" id="adCompletedBtn">
                <i class="fas fa-check"></i> I Watched the Ad
            </button>
            
            <button class="btn btn-secondary mt-20" id="cancelAdBtn">
                <i class="fas fa-times"></i> Cancel
            </button>
        </div>
    </div>
    
    <script>
        // ============= APPLICATION STATE =============
        const APP_STATE = {
            currentUser: null,
            users: JSON.parse(localStorage.getItem('spinToEarnUsers')) || {},
            currentDate: new Date().toDateString(),
            wheelItems: [
                { label: "5 Coins", value: 5, color: "#FF6584" },
                { label: "10 Coins", value: 10, color: "#6C63FF" },
                { label: "Try Again", value: 0, color: "#8a8fa3" },
                { label: "20 Coins", value: 20, color: "#2ecc71" },
                { label: "Bonus Spin", value: "bonus", color: "#f39c12" },
                { label: "50 Coins", value: 50, color: "#9b59b6" },
                { label: "100 Coins", value: 100, color: "#e74c3c" },
                { label: "10 Coins", value: 10, color: "#3498db" }
            ],
            isSpinning: false,
            adTimer: null,
            adTimeLeft: 30
        };

        // ============= DOM ELEMENTS =============
        const authContainer = document.getElementById('authContainer');
        const appContainer = document.getElementById('appContainer');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const loginTab = document.getElementById('loginTab');
        const signupTab = document.getElementById('signupTab');
        const logoutBtn = document.getElementById('logoutBtn');
        const profileLogoutBtn = document.getElementById('profileLogoutBtn');
        const navMenu = document.getElementById('navMenu');
        const mobileToggle = document.getElementById('mobileToggle');
        const navLinks = document.querySelectorAll('.nav-link');
        const staticLinks = document.querySelectorAll('.static-link');
        const wheel = document.getElementById('wheel');
        const spinBtn = document.getElementById('spinBtn');
        const unlockSpinBtn = document.getElementById('unlockSpinBtn');
        const rewardPopup = document.getElementById('rewardPopup');
        const closeRewardBtn = document.getElementById('closeRewardBtn');
        const rewardAmount = document.getElementById('rewardAmount');
        const adUnlockModal = document.getElementById('adUnlockModal');
        const adTimer = document.getElementById('adTimer');
        const adCompletedBtn = document.getElementById('adCompletedBtn');
        const cancelAdBtn = document.getElementById('cancelAdBtn');
        const goToSpinBtn = document.getElementById('goToSpinBtn');
        const goToWithdrawBtn = document.getElementById('goToWithdrawBtn');
        const withdrawForm = document.getElementById('withdrawForm');
        const paymentMethods = document.querySelectorAll('.payment-method');
        
        // ============= UTILITY FUNCTIONS =============
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
                <button class="notification-close"><i class="fas fa-times"></i></button>
            `;
            
            // Add styles for notification
            const style = document.createElement('style');
            style.textContent = `
                .notification {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background-color: ${type === 'success' ? '#2ecc71' : type === 'error' ? '#e74c3c' : '#3498db'};
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                    z-index: 9999;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    min-width: 300px;
                    transform: translateX(150%);
                    transition: transform 0.3s ease;
                }
                .notification.active {
                    transform: translateX(0);
                }
                .notification-content {
                    display: flex;
                    align-items: center;
                }
                .notification-content i {
                    margin-right: 10px;
                    font-size: 1.2rem;
                }
                .notification-close {
                    background: none;
                    border: none;
                    color: white;
                    cursor: pointer;
                    margin-left: 15px;
                }
            `;
            document.head.appendChild(style);
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => notification.classList.add('active'), 10);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.classList.remove('active');
                setTimeout(() => {
                    document.body.removeChild(notification);
                    document.head.removeChild(style);
                }, 300);
            }, 5000);
            
            // Close button
            notification.querySelector('.notification-close').addEventListener('click', () => {
                notification.classList.remove('active');
                setTimeout(() => {
                    document.body.removeChild(notification);
                    document.head.removeChild(style);
                }, 300);
            });
        }

        function saveUserData() {
            localStorage.setItem('spinToEarnUsers', JSON.stringify(APP_STATE.users));
        }

        function loadUserData(username) {
            return APP_STATE.users[username];
        }

        function updateUserData(username, data) {
            APP_STATE.users[username] = { ...APP_STATE.users[username], ...data };
            saveUserData();
        }

        function coinsToPkr(coins) {
            return (coins / 10).toFixed(2);
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // ============= AUTHENTICATION SYSTEM =============
        function initAuthSystem() {
            // Check if user is already logged in
            const loggedInUser = localStorage.getItem('spinToEarnCurrentUser');
            if (loggedInUser && APP_STATE.users[loggedInUser]) {
                loginUser(loggedInUser);
                return;
            }
            
            // Switch between login and signup tabs
            loginTab.addEventListener('click', () => {
                loginTab.classList.add('active');
                signupTab.classList.remove('active');
                loginForm.classList.add('active');
                signupForm.classList.remove('active');
            });
            
            signupTab.addEventListener('click', () => {
                signupTab.classList.add('active');
                loginTab.classList.remove('active');
                signupForm.classList.add('active');
                loginForm.classList.remove('active');
            });
            
            // Handle login
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('loginUsername').value.trim();
                const password = document.getElementById('loginPassword').value;
                
                // Check if user exists
                const userData = APP_STATE.users[username] || Object.values(APP_STATE.users).find(u => u.email === username);
                
                if (!userData) {
                    showNotification('User not found. Please sign up first.', 'error');
                    return;
                }
                
                if (userData.password !== password) {
                    showNotification('Incorrect password.', 'error');
                    return;
                }
                
                loginUser(userData.username);
            });
            
            // Handle signup
            signupForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('signupUsername').value.trim();
                const email = document.getElementById('signupEmail').value.trim();
                const password = document.getElementById('signupPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const ageConfirm = document.getElementById('ageConfirm').checked;
                
                // Validation
                if (!ageConfirm) {
                    showNotification('You must be 18+ to use this platform.', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showNotification('Passwords do not match.', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showNotification('Password must be at least 6 characters.', 'error');
                    return;
                }
                
                if (APP_STATE.users[username]) {
                    showNotification('Username already exists.', 'error');
                    return;
                }
                
                // Check if email already exists
                const emailExists = Object.values(APP_STATE.users).some(u => u.email === email);
                if (emailExists) {
                    showNotification('Email already registered.', 'error');
                    return;
                }
                
                // Create new user
                const newUser = {
                    username,
                    email,
                    password,
                    coins: 0,
                    totalCoins: 0,
                    spins: 0,
                    dailySpins: 3,
                    lastSpinDate: new Date().toDateString(),
                    todayWins: 0,
                    withdrawHistory: [],
                    activityLog: [],
                    joinedDate: new Date().toISOString()
                };
                
                APP_STATE.users[username] = newUser;
                saveUserData();
                showNotification('Account created successfully!', 'success');
                
                // Auto login
                loginUser(username);
            });
        }

        function loginUser(username) {
            APP_STATE.currentUser = username;
            localStorage.setItem('spinToEarnCurrentUser', username);
            
            // Reset daily spins if date changed
            const userData = APP_STATE.users[username];
            if (userData.lastSpinDate !== APP_STATE.currentDate) {
                userData.dailySpins = 3;
                userData.todayWins = 0;
                userData.lastSpinDate = APP_STATE.currentDate;
                updateUserData(username, userData);
            }
            
            // Switch to app view
            authContainer.style.display = 'none';
            appContainer.style.display = 'block';
            
            // Update UI
            updateUserInterface();
            showNotification(`Welcome back, ${username}!`, 'success');
        }

        function logoutUser() {
            APP_STATE.currentUser = null;
            localStorage.removeItem('spinToEarnCurrentUser');
            
            // Switch to auth view
            appContainer.style.display = 'none';
            authContainer.style.display = 'flex';
            
            // Clear form fields
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
            
            showNotification('Logged out successfully.', 'info');
        }

        // ============= USER INTERFACE UPDATES =============
        function updateUserInterface() {
            if (!APP_STATE.currentUser) return;
            
            const userData = APP_STATE.users[APP_STATE.currentUser];
            
            // Update username display
            document.getElementById('usernameDisplay').textContent = userData.username;
            document.getElementById('profileUsername').textContent = userData.username;
            document.getElementById('profileEmail').textContent = userData.email;
            document.getElementById('memberSince').textContent = formatDate(userData.joinedDate);
            
            // Update coin displays
            document.getElementById('coinBalance').textContent = userData.coins;
            document.getElementById('dashboardCoins').textContent = userData.coins;
            document.getElementById('dashboardPkr').textContent = coinsToPkr(userData.coins) + ' PKR';
            document.getElementById('dashboardTotalCoins').textContent = userData.totalCoins;
            document.getElementById('dashboardTotalPkr').textContent = coinsToPkr(userData.totalCoins) + ' PKR';
            document.getElementById('dashboardSpins').textContent = userData.dailySpins;
            document.getElementById('dashboardTotalSpins').textContent = userData.spins;
            
            // Update spin page
            document.getElementById('spinsLeft').textContent = userData.dailySpins;
            document.getElementById('spinBalance').textContent = userData.coins;
            document.getElementById('todayWins').textContent = userData.todayWins;
            
            // Update withdraw page
            document.getElementById('withdrawBalance').textContent = `${userData.coins} coins`;
            document.getElementById('withdrawPkr').textContent = `${coinsToPkr(userData.coins)} PKR`;
            
            // Update profile page
            document.getElementById('profileTotalSpins').textContent = userData.spins;
            document.getElementById('profileTotalCoins').textContent = userData.totalCoins;
            
            // Calculate total withdrawn
            const totalWithdrawn = userData.withdrawHistory
                .filter(w => w.status === 'Completed')
                .reduce((sum, w) => sum + parseFloat(w.amount), 0);
            document.getElementById('profileTotalWithdrawn').textContent = `${totalWithdrawn} PKR`;
            
            // Update withdraw history
            updateWithdrawHistory();
            
            // Update activity log
            updateActivityLog();
            
            // Update spin button state
            spinBtn.disabled = userData.dailySpins <= 0 || APP_STATE.isSpinning;
            spinBtn.innerHTML = userData.dailySpins <= 0 
                ? '<i class="fas fa-lock"></i> NO SPINS LEFT' 
                : APP_STATE.isSpinning 
                    ? '<i class="fas fa-spinner fa-spin"></i> SPINNING...' 
                    : '<i class="fas fa-sync-alt"></i> SPIN NOW';
            
            // Update unlock spin button
            unlockSpinBtn.disabled = APP_STATE.isSpinning;
        }

        function updateWithdrawHistory() {
            const userData = APP_STATE.users[APP_STATE.currentUser];
            const historyTable = document.getElementById('withdrawHistory');
            
            if (userData.withdrawHistory.length === 0) {
                historyTable.innerHTML = `<tr><td colspan="4" class="text-center">No withdrawal history yet</td></tr>`;
                return;
            }
            
            historyTable.innerHTML = userData.withdrawHistory
                .map(w => `
                    <tr>
                        <td>${formatDate(w.date)}</td>
                        <td>${w.amount} PKR</td>
                        <td>${w.method}</td>
                        <td class="status-${w.status.toLowerCase()}">${w.status}</td>
                    </tr>
                `)
                .join('');
        }

        function updateActivityLog() {
            const userData = APP_STATE.users[APP_STATE.currentUser];
            const activityTable = document.getElementById('profileActivity');
            
            if (userData.activityLog.length === 0) {
                activityTable.innerHTML = `<tr><td colspan="3" class="text-center">No activity yet</td></tr>`;
                return;
            }
            
            // Show only last 10 activities
            const recentActivities = userData.activityLog.slice(-10).reverse();
            
            activityTable.innerHTML = recentActivities
                .map(a => `
                    <tr>
                        <td>${formatDate(a.date)}</td>
                        <td>${a.description}</td>
                        <td class="${a.amount >= 0 ? 'text-success' : 'text-danger'}">${a.amount >= 0 ? '+' : ''}${a.amount} ${a.type}</td>
                    </tr>
                `)
                .join('');
        }

        function addActivity(description, amount, type = 'coins') {
            const userData = APP_STATE.users[APP_STATE.currentUser];
            userData.activityLog.push({
                date: new Date().toISOString(),
                description,
                amount,
                type
            });
            updateUserData(APP_STATE.currentUser, userData);
            updateActivityLog();
        }

        // ============= SPIN WHEEL SYSTEM =============
        function initSpinWheel() {
            // Create wheel segments
            wheel.innerHTML = '';
            const angle = 360 / APP_STATE.wheelItems.length;
            
            APP_STATE.wheelItems.forEach((item, index) => {
                const segment = document.createElement('div');
                segment.className = 'wheel-item';
                segment.textContent = item.label;
                segment.style.backgroundColor = item.color;
                segment.style.transform = `rotate(${index * angle}deg) skewY(${90 - angle}deg)`;
                
                // Adjust text orientation
                const textSpan = document.createElement('span');
                textSpan.textContent = item.label;
                textSpan.style.transform = `skewY(${angle - 90}deg) rotate(${angle / 2}deg)`;
                textSpan.style.display = 'block';
                textSpan.style.position = 'absolute';
                textSpan.style.left = '30px';
                textSpan.style.top = '20px';
                textSpan.style.width = '100px';
                textSpan.style.textAlign = 'center';
                
                segment.appendChild(textSpan);
                wheel.appendChild(segment);
            });
            
            // Handle spin button
            spinBtn.addEventListener('click', () => {
                if (APP_STATE.isSpinning) return;
                
                const userData = APP_STATE.users[APP_STATE.currentUser];
                if (userData.dailySpins <= 0) {
                    showNotification('No spins left. Watch an ad to unlock more!', 'warning');
                    return;
                }
                
                startSpin();
            });
            
            // Handle unlock spin button
            unlockSpinBtn.addEventListener('click', () => {
                if (APP_STATE.isSpinning) return;
                showAdUnlockModal();
            });
        }

        function startSpin() {
            APP_STATE.isSpinning = true;
            spinBtn.disabled = true;
            
            const userData = APP_STATE.users[APP_STATE.currentUser];
            userData.dailySpins--;
            userData.spins++;
            updateUserData(APP_STATE.currentUser, userData);
            
            // Randomize spin result with weighted probabilities
            const weightedResults = [
                ...Array(30).fill(0),   // 30% Try Again
                ...Array(25).fill(5),   // 25% 5 coins
                ...Array(20).fill(10),  // 20% 10 coins
                ...Array(10).fill(20),  // 10% 20 coins
                ...Array(8).fill(50),   // 8% 50 coins
                ...Array(5).fill(100),  // 5% 100 coins
                ...Array(2).fill('bonus') // 2% Bonus Spin
            ];
            
            const randomIndex = Math.floor(Math.random() * weightedResults.length);
            const result = weightedResults[randomIndex];
            
            // Find the segment index for this result
            let resultIndex = APP_STATE.wheelItems.findIndex(item => 
                item.value === result || (result === 0 && item.label === 'Try Again'));
            
            if (resultIndex === -1) resultIndex = 0;
            
            // Calculate spin rotation (multiple full rotations + offset to selected segment)
            const fullRotations = 5;
            const angle = 360 / APP_STATE.wheelItems.length;
            const targetRotation = 360 * fullRotations + (360 - (resultIndex * angle)) + (angle / 2);
            
            // Apply spin animation
            wheel.style.transform = `rotate(${targetRotation}deg)`;
            wheel.style.transition = 'transform 5s cubic-bezier(0.17, 0.67, 0.22, 0.99)`;
            
            // Wait for spin to complete
            setTimeout(() => {
                APP_STATE.isSpinning = false;
                processSpinResult(result);
                updateUserInterface();
            }, 5000);
        }

        function processSpinResult(result) {
            const userData = APP_STATE.users[APP_STATE.currentUser];
            let message = '';
            let coinsWon = 0;
            
            if (result === 'bonus') {
                userData.dailySpins += 2;
                message = 'Bonus! You won 2 extra spins!';
                addActivity('Bonus spin win', '+2 spins', 'spins');
                showNotification(message, 'success');
                updateUserData(APP_STATE.currentUser, userData);
                updateUserInterface();
                return;
            }
            
            if (result === 0) {
                message = 'Try Again! No coins this time.';
                showNotification(message, 'info');
                addActivity('Spin - Try again', 0, 'coins');
                return;
            }
            
            coinsWon = result;
            userData.coins += coinsWon;
            userData.totalCoins += coinsWon;
            userData.todayWins += coinsWon;
            
            message = `You won ${coinsWon} coins!`;
            showRewardPopup(coinsWon);
            addActivity(`Spin win - ${coinsWon} coins`, `+${coinsWon}`, 'coins');
            
            updateUserData(APP_STATE.currentUser, userData);
            showNotification(message, 'success');
        }

        function showRewardPopup(coins) {
            rewardAmount.textContent = `${coins} coins`;
            rewardPopup.classList.add('active');
        }

        // ============= AD UNLOCK SYSTEM =============
        function showAdUnlockModal() {
            APP_STATE.adTimeLeft = 30;
            adTimer.textContent = APP_STATE.adTimeLeft;
            adUnlockModal.classList.add('active');
            
            // Start countdown
            APP_STATE.adTimer = setInterval(() => {
                APP_STATE.adTimeLeft--;
                adTimer.textContent = APP_STATE.adTimeLeft;
                
                if (APP_STATE.adTimeLeft <= 0) {
                    clearInterval(APP_STATE.adTimer);
                    adCompletedBtn.disabled = false;
                    adCompletedBtn.innerHTML = '<i class="fas fa-check"></i> Claim Extra Spin';
                }
            }, 1000);
        }

        function closeAdUnlockModal() {
            adUnlockModal.classList.remove('active');
            clearInterval(APP_STATE.adTimer);
            adCompletedBtn.disabled = true;
            adCompletedBtn.innerHTML = '<i class="fas fa-check"></i> I Watched the Ad';
        }

        // ============= WITHDRAW SYSTEM =============
        function initWithdrawSystem() {
            let selectedMethod = 'jazzcash';
            
            // Handle payment method selection
            paymentMethods.forEach(method => {
                method.addEventListener('click', () => {
                    paymentMethods.forEach(m => m.classList.remove('active'));
                    method.classList.add('active');
                    selectedMethod = method.dataset.method;
                });
            });
            
            // Handle withdraw form submission
            withdrawForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const userData = APP_STATE.users[APP_STATE.currentUser];
                const amount = parseFloat(document.getElementById('withdrawAmount').value);
                const accountNumber = document.getElementById('accountNumber').value.trim();
                
                // Validation
                if (amount < 1000) {
                    showNotification('Minimum withdrawal amount is 1000 PKR.', 'error');
                    return;
                }
                
                const requiredCoins = amount * 10; // 100 coins = 10 PKR
                if (userData.coins < requiredCoins) {
                    showNotification(`Insufficient coins. You need ${requiredCoins} coins for ${amount} PKR.`, 'error');
                    return;
                }
                
                if (!accountNumber || accountNumber.length !== 11 || !/^\d+$/.test(accountNumber)) {
                    showNotification('Please enter a valid 11-digit mobile number.', 'error');
                    return;
                }
                
                // Process withdrawal
                userData.coins -= requiredCoins;
                userData.withdrawHistory.unshift({
                    date: new Date().toISOString(),
                    amount: amount,
                    method: selectedMethod === 'jazzcash' ? 'JazzCash' : 'Easypaisa',
                    accountNumber: accountNumber,
                    status: 'Pending'
                });
                
                updateUserData(APP_STATE.currentUser, userData);
                
                // Add activity
                addActivity(`Withdrawal request - ${amount} PKR via ${selectedMethod === 'jazzcash' ? 'JazzCash' : 'Easypaisa'}`, `-${requiredCoins}`, 'coins');
                
                // Show success message
                showNotification(`Withdrawal request of ${amount} PKR submitted successfully! It will be processed within 24 hours.`, 'success');
                
                // Reset form
                withdrawForm.reset();
                paymentMethods[0].click();
                
                // Update UI
                updateUserInterface();
            });
        }

        // ============= NAVIGATION SYSTEM =============
        function initNavigation() {
            // Mobile menu toggle
            mobileToggle.addEventListener('click', () => {
                navMenu.classList.toggle('active');
            });
            
            // Handle navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Close mobile menu if open
                    navMenu.classList.remove('active');
                    
                    // Update active nav link
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    // Show corresponding page
                    const pageId = link.dataset.page + 'Page';
                    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                    document.getElementById(pageId).classList.add('active');
                });
            });
            
            // Handle static page links in footer
            staticLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Update nav links
                    navLinks.forEach(l => l.classList.remove('active'));
                    
                    // Show static page
                    const pageId = 'static' + link.dataset.page.charAt(0).toUpperCase() + link.dataset.page.slice(1);
                    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                    document.getElementById(pageId).classList.add('active');
                });
            });
            
            // Handle back buttons on static pages
            document.querySelectorAll('[id^="backFrom"]').forEach(button => {
                button.addEventListener('click', () => {
                    // Go back to home page
                    navLinks.forEach(l => l.classList.remove('active'));
                    navLinks[0].classList.add('active');
                    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                    document.getElementById('homePage').classList.add('active');
                });
            });
            
            // Quick action buttons
            goToSpinBtn.addEventListener('click', () => {
                navLinks.forEach(l => l.classList.remove('active'));
                navLinks[1].classList.add('active');
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                document.getElementById('spinPage').classList.add('active');
            });
            
            goToWithdrawBtn.addEventListener('click', () => {
                navLinks.forEach(l => l.classList.remove('active'));
                navLinks[2].classList.add('active');
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                document.getElementById('withdrawPage').classList.add('active');
            });
            
            // Logout buttons
            logoutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                logoutUser();
            });
            
            profileLogoutBtn.addEventListener('click', logoutUser);
            
            // Reward popup close
            closeRewardBtn.addEventListener('click', () => {
                rewardPopup.classList.remove('active');
            });
            
            // Ad unlock modal buttons
            adCompletedBtn.addEventListener('click', () => {
                if (APP_STATE.adTimeLeft > 0) {
                    showNotification('Please wait for the timer to complete.', 'warning');
                    return;
                }
                
                // Add extra spin
                const userData = APP_STATE.users[APP_STATE.currentUser];
                userData.dailySpins++;
                updateUserData(APP_STATE.currentUser, userData);
                
                // Add activity
                addActivity('Extra spin unlocked by watching ad', '+1 spin', 'spins');
                
                closeAdUnlockModal();
                showNotification('Extra spin unlocked!', 'success');
                updateUserInterface();
            });
            
            cancelAdBtn.addEventListener('click', closeAdUnlockModal);
        }

        // ============= INITIALIZE APPLICATION =============
        function initApp() {
            initAuthSystem();
            initSpinWheel();
            initWithdrawSystem();
            initNavigation();
            
            // Check if user is already logged in
            const loggedInUser = localStorage.getItem('spinToEarnCurrentUser');
            if (loggedInUser && APP_STATE.users[loggedInUser]) {
                loginUser(loggedInUser);
            }
            
            // Add sample users for testing (remove in production)
            if (Object.keys(APP_STATE.users).length === 0) {
                APP_STATE.users['testuser'] = {
                    username: 'testuser',
                    email: 'test@example.com',
                    password: 'password123',
                    coins: 150,
                    totalCoins: 500,
                    spins: 12,
                    dailySpins: 3,
                    lastSpinDate: new Date().toDateString(),
                    todayWins: 45,
                    withdrawHistory: [
                        {
                            date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                            amount: 500,
                            method: 'JazzCash',
                            accountNumber: '03001234567',
                            status: 'Completed'
                        }
                    ],
                    activityLog: [
                        {
                            date: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
                            description: 'Spin win - 20 coins',
                            amount: 20,
                            type: 'coins'
                        },
                        {
                            date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                            description: 'Spin win - 10 coins',
                            amount: 10,
                            type: 'coins'
                        },
                        {
                            date: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
                            description: 'Extra spin unlocked by watching ad',
                            amount: 1,
                            type: 'spins'
                        }
                    ],
                    joinedDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString()
                };
                saveUserData();
            }
        }

        // Start the application when page loads
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>